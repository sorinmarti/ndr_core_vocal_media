{# Background Image Styles - Reusable include for all base templates #}
<style>
    {# Content Centering #}
    {% if page.center_content %}
        body {
            min-height: 100vh !important;
        }
        .ndr-content-wrapper {
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
        }
    {% endif %}
</style>

{% if page_background.bg_image and page_background.bg_mode != 'NONE' %}
<style>
    {% if page_background.bg_mode == 'FULL_VIEWPORT' or page_background.bg_mode == 'FIXED_PARALLAX' %}
        html, body {
            min-height: 100vh !important;
            margin: 0;
            padding: 0;
        }
        body {
            background-image: url('{{ page_background.bg_image.image.url }}') !important;
            background-size: {{ page_background.bg_size }} !important;
            background-position: {{ page_background.bg_position }} !important;
            background-repeat: no-repeat !important;
            background-attachment: {% if page_background.bg_mode == 'FIXED_PARALLAX' %}fixed{% else %}scroll{% endif %} !important;
        }
        {% if page_background.bg_image_dark %}
        [data-theme="dark"] body {
            background-image: url('{{ page_background.bg_image_dark.image.url }}') !important;
        }
        {% endif %}
        {% if page_background.overlay_enabled %}
            body::before {
                content: '';
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background-color: {{ page_background.overlay_color }};
                opacity: {{ page_background.overlay_opacity }};
                z-index: 0;
                pointer-events: none;
            }
            body > * {
                position: relative;
                z-index: 1;
            }
        {% endif %}
    {% elif page_background.bg_mode == 'HEADER_ONLY' %}
        .page-header-bg {
            background-image: url('{{ page_background.bg_image.image.url }}');
            background-size: {{ page_background.bg_size }};
            background-position: {{ page_background.bg_position }};
            background-repeat: no-repeat;
            padding: 80px 0;
            margin-bottom: 2rem;
            {% if page_background.overlay_enabled %}
                position: relative;
            {% endif %}
        }
        {% if page_background.bg_image_dark %}
        [data-theme="dark"] .page-header-bg {
            background-image: url('{{ page_background.bg_image_dark.image.url }}');
        }
        {% endif %}
        {% if page_background.overlay_enabled %}
            .page-header-bg::before {
                content: '';
                position: absolute;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background-color: {{ page_background.overlay_color }};
                opacity: {{ page_background.overlay_opacity }};
                z-index: 0;
            }
            .page-header-bg > * {
                position: relative;
                z-index: 1;
            }
        {% endif %}
    {% endif %}
</style>
{% endif %}
